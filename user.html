<!DOCTYPE html>
<html>
    <head>
        <title>User Info</title>
        <link rel="icon" type="image/x-icon" href="styles/img/images.jpeg">
        <!-- <link rel="shortcut icon" href="icon.ico"> -->
        <meta charset="utf-8">
        <meta name="author" content="empty-stack-devs">
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <link rel="stylesheet" href="./styles/style.css">
        <link rel="stylesheet" href="./styles/user.css">
    </head>
    <body>
        <script src="./scripts/homepage.js"></script>
        <script src="./scripts/source.js"></script>
        <div id="parent">
            <div id="user-info">
                <div id="user-credentials">
                    <h2 id="name">
                        placeholder
                    </h2>
                    <h3 id="medical-id">try</h3>
                </div>
                <div id="user-details">
                    <div>
                        <h3 id="age">4s</h3>
                        <h3 id="gender">ale</h3>
                        <h3 id="nationality">Maan</h3>
                    </div>
                    <div>
                        <h3 id="bloodtype">O-</h3>
                        <h3 id="height">160cm</h3>
                        <h3 id="weight">65kg</h3>
                    </div>
                </div>
            </div>
            <div id="records">
                <div id="header">
                    <h3>Medical Activity Schedule</h3>
                </div>
                <table>
                    <tr>
                        <th>Date</th>
                        <th>Activity</th>
                        <th>Status</th>
                    </tr>
                    <tr>
                        <td>19/08/2024</td>
                        <td>Cancer Treatment</td>
                    </tr>
                    <tr>
                        <td>18/08/2024</td>
                        <td>Dialysis</td>
                    </tr>
                    <tr>
                        <td>18/08/2024</td>
                        <td>Diabetes Treatment</td>
                    </tr>
                </table>
            </div>
        </div>
        <script>
            var table = document.querySelector("table");
            let medId = localStorage.getItem("medical_id");
            let name = localStorage.getItem("name")
            let age = localStorage.getItem("age");
            let gender = localStorage.getItem("gender");
            let nationality = localStorage.getItem("nationality");
            let bloodtype = localStorage.getItem("bloodtype");
            let height = localStorage.getItem("height");
            let weight = localStorage.getItem("weight");
            let date = localStorage.getItem("date_list");
            date = date.slice(1, -1);
            date = date.split(',');
            date = date.map(item => item.trim());
            let activity = localStorage.getItem("activity_list");
            activity = activity.slice(1, -1);
            activity = activity.split(',');
            activity = activity.map(item => item.trim());
            let lenDate = date.length;
            console.log(date)
            console.log(lenDate)
            let result = '';

            if(medId) {
                document.querySelector("#medical-id").innerHTML = medId;
                document.querySelector("#name").innerHTML = name;
                document.querySelector("#age").innerHTML = age;
                document.querySelector("#gender").innerHTML = gender;
                document.querySelector("#nationality").innerHTML = nationality;
                document.querySelector("#bloodtype").innerHTML = bloodtype;
                document.querySelector("#height").innerHTML = height;
                document.querySelector("#weight").innerHTML = weight;

                for(let i = 0; i < lenDate; i++){
                    result += `
                    <tr>
                        <td>${date[i]}</td>
                        <td>${activity[i]}</td>
                    </tr>
                    `
                };

                table.innerHTML = result
            }
        </script>
    </body>
</html>
